---
layout: post
title: package.jsonè¯¦è§£
categories: 
tags: []
---

### package.jsonä¸­å­—æ®µè¯¦è§£
[https://www.cnblogs.com/zmztya/p/14419578.html](https://www.cnblogs.com/zmztya/p/14419578.html)
```json
{
  // å¿…é¡»ï¼Œé•¿åº¦å¿…é¡»å°äºæˆ–ç­‰äº214ä¸ªå­—ç¬¦ï¼Œä¸èƒ½ä»¥â€œ.â€å’Œâ€œ_â€å¼€å¤´ï¼Œä¸èƒ½åŒ…å«å¤§å†™å­—æ¯
  // æœ€ç»ˆä¼šä½œä¸ºURLä½¿ç”¨ï¼Œæ‰€ä»¥ä¸èƒ½åŒ…å«éURLå®‰å…¨å­—ç¬¦
  // å®šä¹‰äº†ä»¥ package å½¢å¼å¯¼å…¥æ—¶çš„åç§°ï¼ŒåŒæ—¶å®ƒå†³å®šäº†å®ƒåœ¨ npm æºä¸Šçš„å”¯ä¸€åç§°ã€‚
  "name": "vuex",
  // åŠ è½½ npmåŒ… æ—¶çš„é»˜è®¤å…¥å£æ–‡ä»¶ï¼Œå¿…é¡»çš„
  // ï¼ˆä¸€èˆ¬ç”¨æ¥å®šä¹‰CJSçš„å…¥å£ï¼‰
  "main": "dist/vue.runtime.common.js",
  // å®šä¹‰ESMæ¨¡å—çš„å…¥å£æ–‡ä»¶
  "module": "dist/vue.runtime.esm.js",
  // ä» Node.js v12 å¼€å§‹è¢«æ”¯æŒï¼Œå¹¶ä½œä¸º "main"ï¼ˆå…·ä½“ä»‹ç»è¯·çœ‹ä¸‹ä¸€èŠ‚ï¼‰ å­—æ®µçš„æ›¿ä»£æ–¹æ¡ˆ
  // exportsçš„ä¼˜å…ˆçº§æ¯”ä¸Šé¢çš„mainå’Œmoduleé«˜ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼ŒåŒ¹é…ä¸Šexportsçš„è·¯å¾„å°±ä¸ä¼šä½¿ç”¨mainå’Œmoduleçš„è·¯å¾„
  /* ä¾‹å¦‚ä¸‹é¢é…ç½®è¡¨ç¤ºï¼Œå½“åœ¨é¡¹ç›®ä¸­ä½¿ç”¨importå¼•å…¥åŒ…çš„æ—¶å€™ï¼Œè¯¥åŒ…åŒ¹é…çš„æ˜¯â€œnode_modules/åŒ…å/dist/esm/index.jsâ€ï¼Œè€Œä½¿ç”¨requireå¼•å…¥åŒ…çš„æ—¶å€™ï¼ŒåŒ¹é…çš„æ˜¯â€œnode_modules/åŒ…å/dist/cjs/index.jsâ€
    "exports": {
		  "import": "./dist/esm/index.js",
      "require": "./dist/cjs/index.js"
	  }
   */
  // ps: å»ºè®®ä¿ç•™mainå’Œmoduleå­—æ®µï¼Œç”¨æ¥å…¼å®¹ä¸æ”¯æŒexportså­—æ®µçš„nodejsç‰ˆæœ¬æˆ–bundler
  // å‚è€ƒï¼šhttps://nodejs.org/api/packages.html#packages_conditional_exports
  "exports": {
    ".": {
      "module": "./dist/vuex.esm.js",
      "require": "./dist/vuex.common.js",
      "import": "./dist/vuex.mjs" 
    },
    "./*": "./*",
    "./": "./"
  },
  // è§„å®šè¯¥npmåŒ…ä¸‹çš„.jsæ–‡ä»¶è¢«Node.jsä»¥CommonJS Modulesæˆ–ECMAScript ModulesåŠ è½½
  // å½“ä½ è®¾ç½®ä¸º "commonjs" æ—¶ï¼Œé‚£äº›ä»¥è¯¥ package.json ä½œä¸ºæœ€è¿‘çš„çˆ¶çº§é…ç½®æ–‡ä»¶çš„ .js .cjs æ–‡ä»¶é»˜è®¤ä»¥ CommonJS Modules æ‰§è¡Œï¼Œå¦‚æœä½ æƒ³æ‰§è¡Œ ECMAScript Modulesï¼Œå°±å¿…é¡»å°†åç¼€åæ”¹ä¸º .mjs
  // å½“ä½ è®¾ç½®ä¸º "module" æ—¶ï¼Œé‚£äº›ä»¥è¯¥ package.json ä½œä¸ºæœ€è¿‘çš„çˆ¶çº§é…ç½®æ–‡ä»¶çš„ .js .mjs æ–‡ä»¶é»˜è®¤ä»¥ ECMAScript Modules æ‰§è¡Œï¼Œå¦‚æœä½ æƒ³æ‰§è¡Œ CommonJS Modulesï¼Œå°±å¿…é¡»å°†åç¼€åæ”¹ä¸º .cjs
  "type": "moduleæˆ–commonjs",
  // npm ä¸Šæ‰€æœ‰çš„æ–‡ä»¶éƒ½å¼€å¯ cdn æœåŠ¡åœ°å€
  "unpkg": "dist/vue.js",
  // jsdelivr cdnå…¬å…±åº“
  "jsdelivr": "dist/vue.js",
  // TypeScript çš„å…¥å£æ–‡ä»¶
  "typings": "types/index.d.ts",
  // å½“ä½ å‘å¸ƒpackageæ—¶ï¼Œå…·ä½“é‚£äº›æ–‡ä»¶ä¼šå‘å¸ƒä¸Šå»
  "files": [
    "src",
    "dist/*.js",
    "types/*.d.ts"
  ],
  // å£°æ˜è¯¥æ¨¡å—æ˜¯å¦åŒ…å« sideEffectsï¼ˆå‰¯ä½œç”¨ï¼‰ï¼Œä»è€Œå¯ä»¥ä¸º tree-shaking æä¾›æ›´å¤§çš„ä¼˜åŒ–ç©ºé—´ã€‚
  "sideEffects": false,
  // æŒ‡æ˜äº†è¯¥é¡¹ç›®æ‰€éœ€è¦çš„node.jsç‰ˆæœ¬
  "engines": {
    "node": ">=8.9.1",
    "npm": ">=5.5.1",
    "yarn": ">=1.3.2"
  },
  // ç‰ˆæœ¬å·æ ¼å¼ä¸ºï¼šä¸»ç‰ˆæœ¬å·.æ¬¡ç‰ˆæœ¬å·.ä¿®è®¢å·
  // ä¾èµ–å­˜åœ¨ä»¥ä¸‹æƒ…å†µï¼š
  // 1. å›ºå®šç‰ˆæœ¬ï¼šreact-scriptsçš„ç‰ˆæœ¬4.0.3å°±æ˜¯å›ºå®šç‰ˆæœ¬ï¼Œå®‰è£…æ—¶åªå®‰è£…è¿™ä¸ªæŒ‡å®šçš„ç‰ˆæœ¬ï¼›
  // 2. æ³¢æµªå·ï¼šæ¯”å¦‚~4.0.3ï¼Œè¡¨ç¤ºå®‰è£…4.0.xçš„æœ€æ–°ç‰ˆæœ¬ï¼ˆä¸ä½äº4.0.3ï¼‰ï¼Œä¹Ÿå°±æ˜¯è¯´å®‰è£…æ—¶ä¸ä¼šæ”¹
  // å˜ä¸»ç‰ˆæœ¬å·å’Œæ¬¡ç‰ˆæœ¬å·ï¼›
  // 3. æ’å…¥å·ï¼š æ¯”å¦‚ react çš„ç‰ˆæœ¬^17.0.2ï¼Œè¡¨ç¤ºå®‰è£…17.x.xçš„æœ€æ–°ç‰ˆæœ¬ï¼ˆä¸ä½äº17.0.2ï¼‰ï¼Œ
  // ä¹Ÿå°±æ˜¯è¯´å®‰è£…æ—¶ä¸ä¼šæ”¹å˜ä¸»ç‰ˆæœ¬å·ã€‚å¦‚æœä¸»ç‰ˆæœ¬å·ä¸º0ï¼Œé‚£ä¹ˆæ’å…¥å·å’Œæ³¢æµªå·çš„è¡Œä¸ºæ˜¯ä¸€è‡´çš„ï¼›
  // 4. latestæˆ–è€…æ˜Ÿå·*ï¼šå®‰è£…æœ€æ–°çš„ç‰ˆæœ¬
  "dependencies": {
    "react": "^17.0.2",
    "react-dom": "^17.0.2",
    "react-scripts": "4.0.3",
  },
  // å‰ç½®ä¾èµ–
  "peerDependencies": {
    "chai": "1.x"
  }
}

```

å‚è§ï¼š
1. [package.json ä¸­ ä½ è¿˜ä¸æ¸…æ¥šçš„ browserï¼Œmoduleï¼Œmain å­—æ®µä¼˜å…ˆçº§](https://github.com/SunshowerC/blog/issues/8)
2. dependenciesã€devDependencieså’ŒpeerDependenciesçš„åŒºåˆ«
   * dependenciesè¡¨ç¤ºï¼šç”Ÿäº§å’Œå¼€å‘éƒ½ä¼šç”¨åˆ°çš„ä¾èµ–ï¼Œæœ€åä¼šè¢«æ‰“åŒ…åˆ°é¡¹ç›®ä¸­
   * devDependenciesè¡¨ç¤ºï¼šåªåœ¨å¼€å‘ç¯å¢ƒä¸­ä½¿ç”¨çš„ä¾èµ–ï¼Œæœ€åä¸ä¼šè¢«æ‰“åŒ…åˆ°é¡¹ç›®ä¸­
   * peerDependenciesè¡¨ç¤ºï¼šå‰ç½®ä¾èµ–ï¼ˆå®¿ä¸»ä¾èµ–ï¼‰ã€‚ä½¿ç”¨è€…ä¸€å®šä¼šæä¾›å®¿ä¸»è‡ªèº«
3. ä¾èµ–ç‰ˆæœ¬
   ```json
   // 1. æ˜ç¡®ç‰ˆæœ¬
   "dependencies": {
      "solarLunar": "1.0.0"//æ˜ç¡®é™åˆ¶ç‰ˆæœ¬ä¸º1.0.0
   }

   // 2. ä½¿ç”¨"ï½"
   "dependencies": {
      "solarLunar": "~1.0.0"//å¤§çº¦è¿‘ä¼¼ç­‰äº1.0.0ç‰ˆæœ¬ï¼Œå¦‚æœæœ‰è¿™ä¸ªç‰ˆæœ¬ï¼Œä¸€å®šä½¿ç”¨è¿™ä¸ªç‰ˆæœ¬ï¼Œæ²¡æœ‰æ‰¾æœ€è¿‘çš„ã€‚
   }

   // 3. ä½¿ç”¨^
   "dependencies": {
      "solarLunar": "^1.0.0"//å¯»æ‰¾å’Œ1.0.0ç‰ˆæœ¬å…¼å®¹çš„ç‰ˆæœ¬ï¼Œå¦‚æœæœ‰1.0.0å°±ç”¨ï¼Œæ²¡æœ‰æ‰¾æœ€è¿‘çš„ã€‚å’Œï½å®æµ‹æ˜¯ä¸€æ ·çš„ã€‚ 
   }

   // 4. ä½¿ç”¨latest
   "dependencies": {
      "solarLunar": "latest"//å¯»æ‰¾æœ€æ–°ç‰ˆæœ¬ã€‚ 
   }

   // 5. ä½¿ç”¨*
   "dependencies": {
      "solarLunar": "*"//åŒ¹é…ä»»ä½•ç‰ˆæœ¬ï¼Œå®æµ‹å’Œlatestæ•ˆæœä¸€æ ·ä¼šå¯»æ‰¾æœ€æ–°ç‰ˆæœ¬ã€‚ 
   }
   ```

å‚è§ï¼š[ğŸš€ğŸš€ğŸš€ä¸ä½ é¡¹ç›®ç›¸å…³çš„npmçŸ¥è¯†æ€»ç»“](https://juejin.cn/post/6933167787435261959)
